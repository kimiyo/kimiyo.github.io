<!doctype html>
<html lang="ko" data-theme="system">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="JH Kim — 프론트엔드/풀스택 개발자. 간결한 코드와 좋은 사용자 경험을 지향합니다.">
    <title>JH Kim — Developer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body>
    <header class="site-header">
      <nav class="nav">
        <a class="logo" href="#home" aria-label="JH Kim 홈으로 이동">JH Kim</a>
        <button id="theme-toggle" class="theme-toggle" aria-label="테마 전환">🌓</button>
        <ul class="nav-links">
          <li><a href="#about">소개</a></li>
          <li><a href="#projects">프로젝트</a></li>
          <li><a href="#contact">연락처</a></li>
        </ul>
      </nav>
    </header>

    <main id="home" class="site-main">
      <section class="hero">
        <p class="kicker">안녕하세요, 저는</p>
        <h1 class="title">JH Kim<span class="accent">.</span></h1>
        <p class="subtitle">사용자 경험을 중시하는 개발자입니다. 간결한 코드와 명확한 문제 해결을 좋아합니다.</p>
        <div class="hero-actions">
          <a class="btn primary" href="#projects">작업 보기</a>
          <a class="btn" href="#contact">연락하기</a>
        </div>
      </section>

      <section id="about" class="section">
        <h2>소개</h2>
        <p>
          프론트엔드 중심의 풀스택 개발자로, 타입 안정성과 접근성, 퍼포먼스에 관심이 많습니다.
          팀이 빠르고 안정적으로 배포할 수 있는 구조를 설계하고, 유지보수 가능한 코드를 작성합니다.
        </p>
        <ul class="skills">
          <li>TypeScript</li>
          <li>React</li>
          <li>Node.js</li>
          <li>CSS 아키텍처</li>
          <li>웹 접근성</li>
          <li>성능 최적화</li>
        </ul>
      </section>

      <section id="projects" class="section">
        <h2>프로젝트</h2>
        <div class="projects">
          <article class="card">
            <h3>미니 포트폴리오</h3>
            <p>이 페이지입니다. 순수 HTML/CSS/JS로 구성된 가벼운 소개 사이트.</p>
            <div class="meta">
              <span>HTML</span><span>CSS</span><span>JavaScript</span>
            </div>
          </article>
          <article class="card">
            <h3>컴포넌트 실험실</h3>
            <p>접근성 패턴과 인터랙션을 실험하는 UI 컴포넌트 모음.</p>
            <div class="meta">
              <span>a11y</span><span>Design System</span>
            </div>
          </article>
        </div>
      </section>

      <section id="contact" class="section">
        <h2>연락처</h2>
        <p>협업 제안이나 문의가 있다면 언제든지 연락 주세요.</p>
        <div class="contact-actions">
          <a class="btn primary" href="mailto:hello@jh.dev" aria-label="이메일 보내기">이메일</a>
          <a class="btn" href="https://github.com/" target="_blank" rel="noopener" aria-label="GitHub 열기">GitHub</a>
          <a class="btn" href="https://www.linkedin.com/" target="_blank" rel="noopener" aria-label="LinkedIn 열기">LinkedIn</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>© <span id="year"></span> JH Kim. 모두의 더 좋은 웹을 위해.</p>
    </footer>

    <script src="./script.js"></script>
    <script type="module">
      import { Hanji } from './scriptHanji.js';
      
      // 한지 배경 설정
      const lightConfig = {
        baseColor: { r: 245, g: 240, b: 230 }, // 밝은 미색
        fiberColor: { r: 140, g: 120, b: 100 }, // 자연스러운 지푸라기 색
        paperRoughness: 25,
        fiberDensity: 1.2,
        backgroundGradient: null,
        candle: null,
        backlight: null
      };

      const darkConfig = {
        baseColor: { r: 35, g: 30, b: 25 }, // 어두운 배경
        fiberColor: { r: 180, g: 150, b: 120 }, // 어둠 속에서 빛나는 섬유
        paperRoughness: 15,
        backgroundGradient: 'radial-gradient(circle at 25% 50%, #8e562a 0%, #442a0e 60%, #1a1510 100%)',
        candle: {
          src: 'assets/candle.svg',
          x: 0.25, // 왼쪽에서 25% 위치
          y: 0.5,  // 위에서 50% 위치
          width: '200px',
          blur: 4, // 촛불 흐림 효과
          opacity: 1.0
        },
        backlight: {
          x: 0.25, // 촛불 위치와 일치
          y: 0.5,
          radius: 1600,
          minAlpha: 0.1
        }
      };

      // 테마 변경 감지 및 한지 배경 업데이트
      const getCurrentTheme = () => {
        const theme = document.documentElement.getAttribute('data-theme');
        if (theme === 'dark') return 'dark';
        if (theme === 'light') return 'light';
        // system 모드일 경우 시스템 설정 확인
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      };

      // 한지 배경 초기화
      const hanji = new Hanji(document.body, lightConfig);
      hanji.start();

      // Header에 한지 텍스처 추가
      let headerHanji = null;
      const header = document.querySelector('.site-header');
      if (header) {
        headerHanji = new Hanji(header, {
          ...lightConfig,
          paperRoughness: 20,
          fiberDensity: 0.8,
          animationSpeed: 0.0003, // header는 조금 더 느리게
          backgroundGradient: null,
          candle: null,
          backlight: null
        });
        headerHanji.start();
      }

      const updateHanjiTheme = () => {
        const theme = getCurrentTheme();
        hanji.updateConfig(theme === 'dark' ? darkConfig : lightConfig);
        
        // Header 한지도 업데이트
        if (headerHanji) {
          headerHanji.updateConfig(theme === 'dark' ? {
            ...darkConfig,
            paperRoughness: 12,
            fiberDensity: 0.6,
            backgroundGradient: null, // header에는 그라디언트 없음
            candle: null, // header에는 촛불 없음
            backlight: null // header에는 백라이트 없음
          } : {
            ...lightConfig,
            paperRoughness: 20,
            fiberDensity: 0.8
          });
        }
      };

      // 초기 테마 적용
      updateHanjiTheme();

      // 테마 변경 감지 (MutationObserver 사용)
      const observer = new MutationObserver(() => {
        updateHanjiTheme();
      });
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
      });

      // 시스템 테마 변경 감지 (system 모드일 때)
      if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
          if (document.documentElement.getAttribute('data-theme') === 'system') {
            updateHanjiTheme();
          }
        });
      }
    </script>
  </body>
  </html>


