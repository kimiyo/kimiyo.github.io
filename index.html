<!doctype html>
<html lang="ko" data-theme="system">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
    <meta name="description" content="JH Kim — 프론트엔드/풀스택 개발자. 간결한 코드와 좋은 사용자 경험을 지향합니다.">
    <title>JH Kim — Developer</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css">
  </head>
  <body>
    <header class="site-header">
      <nav class="nav">
        <a class="logo" href="#home" aria-label="JH Kim 홈으로 이동">JH Kim</a>
        <button id="theme-toggle" class="theme-toggle" aria-label="테마 전환">🌓</button>
        <button id="mobile-menu-toggle" class="mobile-menu-toggle" aria-label="메뉴 열기">☰</button>
        <ul class="nav-links" id="nav-links">
          <li><a href="#about">소개</a></li>
          <li><a href="#projects">프로젝트</a></li>
          <li class="dropdown">
            <a href="#" class="dropdown-toggle">취미생활</a>
            <ul class="dropdown-menu">
              <li><a href="#" class="dropdown-item" data-action="interactive-story-navigator">interactive story navigator</a></li>
              <li><a href="#" class="dropdown-item" data-action="picture-puzzle-game">그림퍼즐맞추기</a></li>
            </ul>
          </li>
          <li><a href="#contact">연락처</a></li>
        </ul>
      </nav>
    </header>

    <main id="home" class="site-main">
      <section class="hero">
        <p class="kicker">안녕하세요, 저는</p>
        <h1 class="title">JH Kim<span class="accent">.</span></h1>
        <p class="subtitle">사용자 경험을 중시하는 개발자입니다. 간결한 코드와 명확한 문제 해결을 좋아합니다.</p>
      </section>

      <section id="about" class="section">
        <h2>소개</h2>
        <p>
          프론트엔드 중심의 풀스택 개발자로, 타입 안정성과 접근성, 퍼포먼스에 관심이 많습니다.
          팀이 빠르고 안정적으로 배포할 수 있는 구조를 설계하고, 유지보수 가능한 코드를 작성합니다.
        </p>
        <ul class="skills">
          <li>TypeScript</li>
          <li>React</li>
          <li>Node.js</li>
          <li>CSS 아키텍처</li>
          <li>웹 접근성</li>
          <li>성능 최적화</li>
        </ul>
      </section>

      <section id="projects" class="section">
        <h2>프로젝트</h2>
        <div class="projects">
          <article class="card">
            <div class="card-header">
              <img src="assets/KimsDeskClockIcon.ico" alt="Kim's Desk Clock 아이콘" class="card-icon" width="48" height="48">
              <h3><a href="https://apps.microsoft.com/detail/9nj0c8pzzznn?hl=ko-KR&gl=KR" target="_blank" rel="noopener" aria-label="Microsoft Store에서 Kim's Desk Clock 보기">Kim's Desk Clock</a></h3>
            </div>
            <p>Windows용 미니멀 아날로그 데스크톱 시계 앱. 사용자 배경 이미지 지원, 알람 관리자, 다양한 테마와 시계 페이스를 제공합니다. 항상 위 표시, 크기 조절 등 데스크톱 환경에 최적화된 생산성 도구입니다.</p>
            <div class="meta">
              <span>Windows</span><span>Desktop App</span><span>생산성</span>
            </div>
            <div style="margin-top: 12px;">
              <a class="btn" href="https://apps.microsoft.com/detail/9nj0c8pzzznn?hl=ko-KR&gl=KR" target="_blank" rel="noopener" aria-label="Microsoft Store에서 Kim's Desk Clock 보기">Microsoft Store</a>
            </div>
          </article>
          <article class="card">
            <h3>미니 포트폴리오</h3>
            <p>이 페이지입니다. 순수 HTML/CSS/JS로 구성된 가벼운 소개 사이트.</p>
            <div class="meta">
              <span>HTML</span><span>CSS</span><span>JavaScript</span>
            </div>
          </article>
          <article class="card">
            <h3>한지 배경 모듈</h3>
            <p>한국의 전통 종이, 한지를 디지털로 재현한 배경 생성 모듈입니다. 프랙탈 노이즈로 닥나무 펄프의 구름 같은 질감을 구현하고, 벡터 섬유로 매번 다른 자연스러운 텍스처를 그려냅니다. 다크 모드에서는 촛불이 한지를 비추는 은은한 분위기를 연출하여 전통과 현대의 조화를 보여줍니다. 완전 자립형으로 별도 이미지 없이 순수 코드만으로 동작합니다.</p>
            <div class="meta">
              <span>Canvas</span><span>프랙탈 노이즈</span><span>한지</span><span>전통</span>
            </div>
          </article>
        </div>
      </section>

      <section id="contact" class="section">
        <h2>연락처</h2>
        <p>궁금한 점이나 이야기하고 싶은 것이 있으시면 언제든지 연락 주세요.</p>
        <div class="contact-actions">
          <a class="btn primary" href="mailto:kimscoder@gmail.com" aria-label="이메일 보내기">이메일</a>
          <a class="btn" href="https://github.com/" target="_blank" rel="noopener" aria-label="GitHub 열기">GitHub</a>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <p>© <span id="year"></span> JH Kim. 모두의 더 좋은 웹을 위해.</p>
    </footer>

    <!-- Game Modal (범용 모달) -->
    <div id="game-modal" class="modal-overlay hidden">
      <div class="modal-container">
        <button id="close-game-modal" class="modal-close-btn" aria-label="닫기">✕</button>
        <iframe id="game-iframe" src="" frameborder="0"></iframe>
      </div>
    </div>

    <script src="./script.js"></script>
    <script type="module">
      import { Hanji } from './scriptHanji.js';
      
      // 한지 배경 설정
      const lightConfig = {
        baseColor: { r: 245, g: 240, b: 230 }, // 밝은 미색
        fiberColor: { r: 140, g: 120, b: 100 }, // 자연스러운 지푸라기 색
        paperRoughness: 25,
        fiberDensity: 1.2,
        backgroundGradient: null,
        candle: null,
        backlight: null
      };

      const darkConfig = {
        baseColor: { r: 35, g: 30, b: 25 }, // 어두운 배경
        fiberColor: { r: 180, g: 150, b: 120 }, // 어둠 속에서 빛나는 섬유
        paperRoughness: 15,
        backgroundGradient: 'radial-gradient(circle at 25% 50%, #8e562a 0%, #442a0e 60%, #1a1510 100%)',
        candle: {
          src: 'assets/candle.svg',
          x: 0.25, // 왼쪽에서 25% 위치
          y: 0.5,  // 위에서 50% 위치
          width: '200px',
          blur: 4, // 촛불 흐림 효과
          opacity: 1.0
        },
        backlight: {
          x: 0.25, // 촛불 위치와 일치
          y: 0.5,
          radius: 1600,
          minAlpha: 0.1
        }
      };

      // 테마 변경 감지 및 한지 배경 업데이트
      const getCurrentTheme = () => {
        const theme = document.documentElement.getAttribute('data-theme');
        if (theme === 'dark') return 'dark';
        if (theme === 'light') return 'light';
        // system 모드일 경우 시스템 설정 확인
        return window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light';
      };

      // 한지 배경 초기화
      const hanji = new Hanji(document.body, lightConfig);
      hanji.start();

      // Header에 한지 텍스처 추가
      let headerHanji = null;
      const header = document.querySelector('.site-header');
      if (header) {
        headerHanji = new Hanji(header, {
          ...lightConfig,
          paperRoughness: 20,
          fiberDensity: 0.8,
          animationSpeed: 0.0003, // header는 조금 더 느리게
          backgroundGradient: null,
          candle: null,
          backlight: null
        });
        headerHanji.start();
      }

      const updateHanjiTheme = () => {
        const theme = getCurrentTheme();
        hanji.updateConfig(theme === 'dark' ? darkConfig : lightConfig);
        
        // Header 한지도 업데이트
        if (headerHanji) {
          headerHanji.updateConfig(theme === 'dark' ? {
            ...darkConfig,
            paperRoughness: 12,
            fiberDensity: 0.6,
            backgroundGradient: null, // header에는 그라디언트 없음
            candle: null, // header에는 촛불 없음
            backlight: null // header에는 백라이트 없음
          } : {
            ...lightConfig,
            paperRoughness: 20,
            fiberDensity: 0.8
          });
        }
      };

      // 초기 테마 적용
      updateHanjiTheme();

      // 테마 변경 감지 (MutationObserver 사용)
      const observer = new MutationObserver(() => {
        updateHanjiTheme();
      });
      observer.observe(document.documentElement, {
        attributes: true,
        attributeFilter: ['data-theme']
      });

      // 시스템 테마 변경 감지 (system 모드일 때)
      if (window.matchMedia) {
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => {
          if (document.documentElement.getAttribute('data-theme') === 'system') {
            updateHanjiTheme();
          }
        });
      }
    </script>
  </body>
  </html>


